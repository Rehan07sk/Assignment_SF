--------- WAREHOUSE SETUP --------

CREATE OR REPLACE WAREHOUSE SNOWPIPE_INGEST_WH
  WAREHOUSE_SIZE = 'SMALL'
  AUTO_SUSPEND = 60
  AUTO_RESUME = TRUE
  INITIALLY_SUSPENDED = TRUE;

  CREATE ROLE SNOWPIPE_INGEST_WH_USAGE;
  CREATE ROLE SNOWPIPE_INGEST_WH_OPERATE;
  CREATE ROLE SNOWPIPE_INGEST_WH_ALL;

  GRANT USAGE ON WAREHOUSE SNOWPIPE_INGEST_WH TO ROLE SNOWPIPE_INGEST_WH_USAGE;
  GRANT USAGE, MONITOR, OPERATE ON WAREHOUSE SNOWPIPE_INGEST_WH TO ROLE SNOWPIPE_INGEST_WH_OPERATE;
  GRANT ALL ON WAREHOUSE  SNOWPIPE_INGEST_WH TO ROLE SNOWPIPE_INGEST_WH_ALL;

  GRANT ROLE SNOWPIPE_INGEST_WH_USAGE TO ROLE S3_INGEST_READONLY;
  GRANT ROLE SNOWPIPE_INGEST_WH_OPERATE TO ROLE S3_INGEST_READWRITE;
  GRANT ROLE SNOWPIPE_INGEST_WH_ALL TO ROLE snowpipe_ingest_demo_sysadmin;
